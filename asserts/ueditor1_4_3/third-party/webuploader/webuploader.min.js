!function(w,l){var z,e={},g=function(b,a){var f,d,k;if("string"==typeof b)return h(b);f=[];d=b.length;for(k=0;d>k;k++)f.push(h(b[k]));return a.apply(null,f)},h=function(b){var a=e[b]||w[b];if(!a)throw Error("`"+b+"` is undefined");return a},c=l(w,function(b,a,f){2===arguments.length&&(f=a,a=null);g(a||[],function(){var a=arguments,k,m={exports:f};"function"==typeof f&&(a.length||(a=[g,m.exports,m]),k=f.apply(null,a),void 0!==k&&(m.exports=k));e[b]=m.exports})},g);(function(b){var a,f,d,k,m,c;c=function(a){return a&&
a.charAt(0).toUpperCase()+a.substr(1)};for(a in e)if(f=b,e.hasOwnProperty(a)){d=a.split("/");for(m=c(d.pop());k=c(d.shift());)f[k]=f[k]||{},f=f[k];f[m]=e[a]}})(c);"object"==typeof module&&"object"==typeof module.exports?module.exports=c:"function"==typeof define&&define.amd?define([],c):(z=w.WebUploader,w.WebUploader=c,w.WebUploader.noConflict=function(){w.WebUploader=z})}(this,function(w,l,z){return l("dollar-third",[],function(){return w.jQuery||w.Zepto}),l("dollar",["dollar-third"],function(e){return e}),
l("promise-third",["dollar"],function(e){return{Deferred:e.Deferred,when:e.when,isPromise:function(e){return e&&"function"==typeof e.then}}}),l("promise",["promise-third"],function(e){return e}),l("base",["dollar","promise"],function(e,g){function h(a,b){return function(){return a.apply(b,arguments)}}function c(a){var b;return Object.create?Object.create(a):(b=function(){},b.prototype=a,new b)}var b=function(){},a=Function.call;return{version:"0.1.2",$:e,Deferred:g.Deferred,isPromise:g.isPromise,
when:g.when,browser:function(a){var b={},k=a.match(/WebKit\/([\d.]+)/),m=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),c=a.match(/MSIE\s([\d\.]+)/)||a.match(/(?:trident)(?:.*rv:([\w.]+))?/i),e=a.match(/Firefox\/([\d.]+)/),h=a.match(/Safari\/([\d.]+)/);a=a.match(/OPR\/([\d.]+)/);return k&&(b.webkit=parseFloat(k[1])),m&&(b.chrome=parseFloat(m[1])),c&&(b.ie=parseFloat(c[1])),e&&(b.firefox=parseFloat(e[1])),h&&(b.safari=parseFloat(h[1])),a&&(b.opera=parseFloat(a[1])),b}(navigator.userAgent),
os:function(a){var b={},k=a.match(/(?:Android);?[\s\/]+([\d.]+)?/);a=a.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return k&&(b.android=parseFloat(k[1])),a&&(b.ios=parseFloat(a[1].replace(/_/g,"."))),b}(navigator.userAgent),inherits:function(a,b,k){var m;return"function"==typeof b?(m=b,b=null):m=b&&b.hasOwnProperty("constructor")?b.constructor:function(){return a.apply(this,arguments)},e.extend(!0,m,a,k||{}),m.__super__=a.prototype,m.prototype=c(a.prototype),b&&e.extend(!0,m.prototype,b),m},noop:b,
bindFn:h,log:w.console?h(console.log,console):b,nextTick:function(){return function(a){setTimeout(a,1)}}(),slice:function(b){return function(){return a.apply(b,arguments)}}([].slice),guid:function(){var a=0;return function(b){for(var k=(+new Date).toString(32),m=0;5>m;m++)k+=Math.floor(65535*Math.random()).toString(32);return(b||"wu_")+k+(a++).toString(32)}}(),formatSize:function(a,b,k){var m;for(k=k||["B","K","M","G","TB"];(m=k.shift())&&1024<a;)a/=1024;return("B"===m?a:a.toFixed(b||2))+m}}}),l("mediator",
["base"],function(e){function g(b,f,d,c){return a.grep(b,function(a){return!(!a||f&&a.e!==f||d&&a.cb!==d&&a.cb._cb!==d||c&&a.ctx!==c)})}function h(b,f,c){a.each((b||"").split(d),function(a,b){c(b,f)})}function c(a,b){for(var f,d=!1,c=-1,e=a.length;++c<e;)if(f=a[c],!1===f.cb.apply(f.ctx2,b)){d=!0;break}return!d}var b,a=e.$,f=[].slice,d=/\s+/;return b={on:function(a,b,f){var d,c=this;return b?(d=this._events||(this._events=[]),h(a,b,function(a,b){var k={e:a};k.cb=b;k.ctx=f;k.ctx2=f||c;k.id=d.length;
d.push(k)}),this):this},once:function(a,b,f){var d=this;return b?(h(a,b,function(a,b){var k=function(){return d.off(a,k),b.apply(f||d,arguments)};k._cb=b;d.on(a,k,f)}),d):d},off:function(b,f,d){var c=this._events;return c?b||f||d?(h(b,f,function(b,f){a.each(g(c,b,f,d),function(){delete c[this.id]})}),this):(this._events=[],this):this},trigger:function(a){var b,d,e;return this._events&&a?(b=f.call(arguments,1),d=g(this._events,a),e=g(this._events,"all"),c(d,b)&&c(e,arguments)):this}},a.extend({installTo:function(f){return a.extend(f,
b)}},b)}),l("uploader",["base","mediator"],function(e,g){function h(b){this.options=c.extend(!0,{},h.options,b);this._init(this.options)}var c=e.$;return h.options={},g.installTo(h.prototype),c.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",getDimension:"get-dimension",addButton:"add-btn",getRuntimeType:"get-runtime-type",
refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(b,a){h.prototype[b]=function(){return this.request(a,arguments)}}),c.extend(h.prototype,{state:"pending",_init:function(b){var a=this;a.request("init",b,function(){a.state="ready";a.trigger("ready")})},option:function(b,a){var f=this.options;return 1<arguments.length?void(c.isPlainObject(a)&&c.isPlainObject(f[b])?c.extend(f[b],a):f[b]=a):b?f[b]:f},getStats:function(){var b=this.request("get-stats");return{successNum:b.numOfSuccess,
cancelNum:b.numOfCancel,invalidNum:b.numOfInvalid,uploadFailNum:b.numOfUploadFailed,queueNum:b.numOfQueue}},trigger:function(b){var a=[].slice.call(arguments,1),f=this.options,d="on"+b.substring(0,1).toUpperCase()+b.substring(1);return!1===g.trigger.apply(this,arguments)||c.isFunction(f[d])&&!1===f[d].apply(this,a)||c.isFunction(this[d])&&!1===this[d].apply(this,a)||!1===g.trigger.apply(g,[this,b].concat(a))?!1:!0},request:e.noop}),e.create=h.create=function(b){return new h(b)},e.Uploader=h,h}),l("runtime/runtime",
["base","mediator"],function(e,g){function h(a){this.options=c.extend({container:document.body},a);this.uid=e.guid("rt_")}var c=e.$,b={},a=function(a){for(var b in a)if(a.hasOwnProperty(b))return b;return null};return c.extend(h.prototype,{getContainer:function(){var a,b,k=this.options;return this._container?this._container:(a=c(k.container||document.body),b=c(document.createElement("div")),b.attr("id","rt_"+this.uid),b.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),
a.append(b),a.addClass("webuploader-container"),this._container=b,b)},init:e.noop,exec:e.noop,destroy:function(){this._container&&this._container.parentNode.removeChild(this.__container);this.off()}}),h.orders="html5,flash",h.addRuntime=function(a,d){b[a]=d},h.hasRuntime=function(f){return!(f?!b[f]:!a(b))},h.create=function(f,d){var k;if(d=d||h.orders,c.each(d.split(/\s*,\s*/g),function(){return b[this]?(k=this,!1):void 0}),k=k||a(b),!k)throw Error("Runtime Error");return new b[k](f)},g.installTo(h.prototype),
h}),l("runtime/client",["base","mediator","runtime/runtime"],function(e,g,h){function c(a,f){var d,k=e.Deferred();this.uid=e.guid("client_");this.runtimeReady=function(a){return k.done(a)};this.connectRuntime=function(a,c){if(d)throw Error("already connected!");return k.done(c),"string"==typeof a&&b.get(a)&&(d=b.get(a)),d=d||b.get(null,f),d?(e.$.extend(d.options,a),d.__promise.then(k.resolve),d.__client++):(d=h.create(a,a.runtimeOrder),d.__promise=k.promise(),d.once("ready",k.resolve),d.init(),b.add(d),
d.__client=1),f&&(d.__standalone=f),d};this.getRuntime=function(){return d};this.disconnectRuntime=function(){d&&(d.__client--,0>=d.__client&&(b.remove(d),delete d.__promise,d.destroy()),d=null)};this.exec=function(){if(d){var b=e.slice(arguments);return a&&b.unshift(a),d.exec.apply(this,b)}};this.getRuid=function(){return d&&d.uid};this.destroy=function(a){return function(){a&&a.apply(this,arguments);this.trigger("destroy");this.off();this.exec("destroy");this.disconnectRuntime()}}(this.destroy)}
var b;return b=function(){var a={};return{add:function(b){a[b.uid]=b},get:function(b,d){var k;if(b)return a[b];for(k in a)if(!d||!a[k].__standalone)return a[k];return null},remove:function(b){delete a[b.uid]}}}(),g.installTo(c.prototype),c}),l("lib/dnd",["base","mediator","runtime/client"],function(e,g,h){function c(a){a=this.options=b.extend({},c.options,a);a.container=b(a.container);a.container.length&&h.call(this,"DragAndDrop")}var b=e.$;return c.options={accept:null,disableGlobalDnd:!1},e.inherits(h,
{constructor:c,init:function(){var a=this;a.connectRuntime(a.options,function(){a.exec("init");a.trigger("ready")})},destroy:function(){this.disconnectRuntime()}}),g.installTo(c.prototype),c}),l("widgets/widget",["base","uploader"],function(e,g){function h(a){if(!a)return!1;var f=a.length,d=b.type(a);return 1===a.nodeType&&f?!0:"array"===d||"function"!==d&&"string"!==d&&(0===f||"number"==typeof f&&0<f&&f-1 in a)}function c(a){this.owner=a;this.options=a.options}var b=e.$,a=g.prototype._init,f={},
d=[];return b.extend(c.prototype,{init:e.noop,invoke:function(a,d){var c=this.responseMap;return c&&a in c&&c[a]in this&&b.isFunction(this[c[a]])?this[c[a]].apply(this,d):f},request:function(){return this.owner.request.apply(this.owner,arguments)}}),b.extend(g.prototype,{_init:function(){var f=this,c=f._widgets=[];return b.each(d,function(a,b){c.push(new b(f))}),a.apply(f,arguments)},request:function(a,b,d){var c,g,y,t=0,q=this._widgets,l=q.length,x=[],H=[];for(b=h(b)?b:[b];l>t;t++)c=q[t],c=c.invoke(a,
b),c!==f&&(e.isPromise(c)?H.push(c):x.push(c));return d||H.length?(g=e.when.apply(e,H),y=g.pipe?"pipe":"then",g[y](function(){var a=e.Deferred(),b=arguments;return setTimeout(function(){a.resolve.apply(a,b)},1),a.promise()})[y](d||e.noop)):x[0]}}),g.register=c.register=function(a,f){var p,h={init:"init"};return 1===arguments.length?(f=a,f.responseMap=h):f.responseMap=b.extend(h,a),p=e.inherits(c,f),d.push(p),p},c}),l("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(e,g,h){var c=
e.$;return g.options.dnd="",g.register({init:function(b){if(b.dnd&&"html5"===this.request("predict-runtime-type")){var a,f=this,d=e.Deferred();b=c.extend({},{disableGlobalDnd:b.disableGlobalDnd,container:b.dnd,accept:b.accept});return a=new h(b),a.once("ready",d.resolve),a.on("drop",function(a){f.request("add-file",[a])}),a.on("accept",function(a){return f.owner.trigger("dndAccept",a)}),a.init(),d.promise()}}})}),l("lib/filepaste",["base","mediator","runtime/client"],function(e,g,h){function c(a){a=
this.options=b.extend({},a);a.container=b(a.container||document.body);h.call(this,"FilePaste")}var b=e.$;return e.inherits(h,{constructor:c,init:function(){var a=this;a.connectRuntime(a.options,function(){a.exec("init");a.trigger("ready")})},destroy:function(){this.exec("destroy");this.disconnectRuntime();this.off()}}),g.installTo(c.prototype),c}),l("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(e,g,h){var c=e.$;return g.register({init:function(b){if(b.paste&&"html5"===
this.request("predict-runtime-type")){var a,f=this,d=e.Deferred();b=c.extend({},{container:b.paste,accept:b.accept});return a=new h(b),a.once("ready",d.resolve),a.on("paste",function(a){f.owner.request("add-file",[a])}),a.init(),d.promise()}}})}),l("lib/blob",["base","runtime/client"],function(e,g){function h(c,b){this.source=b;this.ruid=c;g.call(this,"Blob");this.uid=b.uid||this.uid;this.type=b.type||"";this.size=b.size||0;c&&this.connectRuntime(c)}return e.inherits(g,{constructor:h,slice:function(c,
b){return this.exec("slice",c,b)},getSource:function(){return this.source}}),h}),l("lib/file",["base","lib/blob"],function(e,g){function h(a,f){var d;g.apply(this,arguments);this.name=f.name||"untitled"+c++;d=b.exec(f.name)?RegExp.$1.toLowerCase():"";!d&&this.type&&(d=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(this.type)?RegExp.$1.toLowerCase():"",this.name+="."+d);!this.type&&~"jpg,jpeg,png,gif,bmp".indexOf(d)&&(this.type="image/"+("jpg"===d?"jpeg":d));this.ext=d;this.lastModifiedDate=f.lastModifiedDate||
(new Date).toLocaleString()}var c=1,b=/\.([^.]+)$/;return e.inherits(g,h)}),l("lib/filepicker",["base","runtime/client","lib/file"],function(e,g,h){function c(a){if(a=this.options=b.extend({},c.options,a),a.container=b(a.id),!a.container.length)throw Error("\u6309\u94ae\u6307\u5b9a\u9519\u8bef");a.innerHTML=a.innerHTML||a.label||a.container.html()||"";a.button=b(a.button||document.createElement("div"));a.button.html(a.innerHTML);a.container.html(a.button);g.call(this,"FilePicker",!0)}var b=e.$;return c.options=
{button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file"},e.inherits(g,{constructor:c,init:function(){var a=this,f=a.options,d=f.button;d.addClass("webuploader-pick");a.on("all",function(c){switch(c){case "mouseenter":d.addClass("webuploader-pick-hover");break;case "mouseleave":d.removeClass("webuploader-pick-hover");break;case "change":c=a.exec("getFiles"),a.trigger("select",b.map(c,function(b){return b=new h(a.getRuid(),b),b._refer=f.container,b}),f.container)}});
a.connectRuntime(f,function(){a.refresh();a.exec("init",f);a.trigger("ready")});b(w).on("resize",function(){a.refresh()})},refresh:function(){var a=this.getRuntime().getContainer(),b=this.options.button,d=b.outerWidth?b.outerWidth():b.width(),c=b.outerHeight?b.outerHeight():b.height(),b=b.offset();d&&c&&a.css({bottom:"auto",right:"auto",width:d+"px",height:c+"px"}).offset(b)},enable:function(){this.options.button.removeClass("webuploader-pick-disable");this.refresh()},disable:function(){var a=this.options.button;
this.getRuntime().getContainer().css({top:"-99999px"});a.addClass("webuploader-pick-disable")},destroy:function(){this.runtime&&(this.exec("destroy"),this.disconnectRuntime())}}),c}),l("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(e,g,h){var c=e.$;return c.extend(g.options,{pick:null,accept:null}),g.register({"add-btn":"addButton",refresh:"refresh",disable:"disable",enable:"enable"},{init:function(b){return this.pickers=[],b.pick&&this.addButton(b.pick)},refresh:function(){c.each(this.pickers,
function(){this.refresh()})},addButton:function(b){var a,f,d,k=this,m=k.options,p=m.accept;if(b)return d=e.Deferred(),c.isPlainObject(b)||(b={id:b}),a=c.extend({},b,{accept:c.isPlainObject(p)?[p]:p,swf:m.swf,runtimeOrder:m.runtimeOrder}),f=new h(a),f.once("ready",d.resolve),f.on("select",function(a){k.owner.request("add-file",[a])}),f.init(),this.pickers.push(f),d.promise()},disable:function(){c.each(this.pickers,function(){this.disable()})},enable:function(){c.each(this.pickers,function(){this.enable()})}})}),
l("lib/image",["base","runtime/client","lib/blob"],function(e,g,h){function c(a){this.options=b.extend({},c.options,a);g.call(this,"Image");this.on("load",function(){this._info=this.exec("info");this._meta=this.exec("meta")})}var b=e.$;return c.options={quality:90,crop:!1,preserveHeaders:!0,allowMagnify:!0},e.inherits(g,{constructor:c,info:function(a){return a?(this._info=a,this):this._info},meta:function(a){return a?(this._meta=a,this):this._meta},loadFromBlob:function(a){var b=this,d=a.getRuid();
this.connectRuntime(d,function(){b.exec("init",b.options);b.exec("loadFromBlob",a)})},resize:function(){var a=e.slice(arguments);return this.exec.apply(this,["resize"].concat(a))},getAsDataUrl:function(a){return this.exec("getAsDataUrl",a)},getAsBlob:function(a){a=this.exec("getAsBlob",a);return new h(this.getRuid(),a)}}),c}),l("widgets/image",["base","uploader","lib/image","widgets/widget"],function(e,g,h){var c,b=e.$;return c=function(a){var b=0,d=[],c=function(){for(var c;d.length&&a>b;)c=d.shift(),
b+=c[0],c[1]()};return function(a,p,e){d.push([p,e]);a.once("destroy",function(){b-=p;setTimeout(c,1)});setTimeout(c,1)}}(5242880),b.extend(g.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),g.register({"make-thumb":"makeThumb","before-send-file":"compressImage"},{makeThumb:function(a,f,d,k){var m,p;return a=this.request("get-file",a),a.type.match(/^image/)?
(m=b.extend({},this.options.thumb),b.isPlainObject(d)&&(m=b.extend(m,d),d=null),d=d||m.width,k=k||m.height,p=new h(m),p.once("load",function(){a._info=a._info||p.info();a._meta=a._meta||p.meta();p.resize(d,k)}),p.once("complete",function(){f(!1,p.getAsDataUrl(m.type));p.destroy()}),p.once("error",function(){f(!0);p.destroy()}),void c(p,a.source.size,function(){a._info&&p.info(a._info);a._meta&&p.meta(a._meta);p.loadFromBlob(a.source)})):void f(!0)},compressImage:function(a){var c,d,k=this.options.compress||
this.options.resize,m=k&&k.compressSize||307200;return a=this.request("get-file",a),!k||!~"image/jpeg,image/jpg".indexOf(a.type)||a.size<m||a._compressed?void 0:(k=b.extend({},k),d=e.Deferred(),c=new h(k),d.always(function(){c.destroy();c=null}),c.once("error",d.reject),c.once("load",function(){a._info=a._info||c.info();a._meta=a._meta||c.meta();c.resize(k.width,k.height)}),c.once("complete",function(){var b,m;try{b=c.getAsBlob(k.type),m=a.size,b.size<m&&(a.source=b,a.size=b.size,a.trigger("resize",
b.size,m)),a._compressed=!0,d.resolve()}catch(e){d.resolve()}}),a._info&&c.info(a._info),a._meta&&c.meta(a._meta),c.loadFromBlob(a.source),d.promise())}})}),l("file",["base","mediator"],function(e,g){function h(d){this.name=d.name||"Untitled";this.size=d.size||0;this.type=d.type||"application";this.lastModifiedDate=d.lastModifiedDate||1*new Date;this.id=c+b++;this.ext=a.exec(this.name)?RegExp.$1:"";this.statusText="";f[this.id]=h.Status.INITED;this.source=d;this.loaded=0;this.on("error",function(a){this.setStatus(h.Status.ERROR,
a)})}var c="WU_FILE_",b=0,a=/\.([^.]+)$/,f={};return e.$.extend(h.prototype,{setStatus:function(a,b){var c=f[this.id];"undefined"!=typeof b&&(this.statusText=b);a!==c&&(f[this.id]=a,this.trigger("statuschange",a,c))},getStatus:function(){return f[this.id]},getSource:function(){return this.source},destory:function(){delete f[this.id]}}),g.installTo(h.prototype),h.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",
INVALID:"invalid"},h}),l("queue",["base","mediator","file"],function(e,g,h){function c(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0};this._queue=[];this._map={}}var b=e.$,a=h.Status;return b.extend(c.prototype,{append:function(a){return this._queue.push(a),this._fileAdded(a),this},prepend:function(a){return this._queue.unshift(a),this._fileAdded(a),this},getFile:function(a){return"string"!=typeof a?a:this._map[a]},fetch:function(b){var c,
k,m=this._queue.length;b=b||a.QUEUED;for(c=0;m>c;c++)if(k=this._queue[c],b===k.getStatus())return k;return null},sort:function(a){"function"==typeof a&&this._queue.sort(a)},getFiles:function(){for(var a,c=[].slice.call(arguments,0),k=[],m=0,e=this._queue.length;e>m;m++)a=this._queue[m],c.length&&!~b.inArray(a.getStatus(),c)||k.push(a);return k},_fileAdded:function(b){var c=this;this._map[b.id]||(this._map[b.id]=b,b.on("statuschange",function(a,b){c._onFileStatusChange(a,b)}));b.setStatus(a.QUEUED)},
_onFileStatusChange:function(b,c){var k=this.stats;switch(c){case a.PROGRESS:k.numOfProgress--;break;case a.QUEUED:k.numOfQueue--;break;case a.ERROR:k.numOfUploadFailed--;break;case a.INVALID:k.numOfInvalid--}switch(b){case a.QUEUED:k.numOfQueue++;break;case a.PROGRESS:k.numOfProgress++;break;case a.ERROR:k.numOfUploadFailed++;break;case a.COMPLETE:k.numOfSuccess++;break;case a.CANCELLED:k.numOfCancel++;break;case a.INVALID:k.numOfInvalid++}}}),g.installTo(c.prototype),c}),l("widgets/queue","base uploader queue file lib/file runtime/client widgets/widget".split(" "),
function(e,g,h,c,b,a){var f=e.$,d=/\.\w+$/,k=c.Status;return g.register({"sort-files":"sortFiles","add-file":"addFiles","get-file":"getFile","fetch-file":"fetchFile","get-stats":"getStats","get-files":"getFiles","remove-file":"removeFile",retry:"retry",reset:"reset","accept-file":"acceptFile"},{init:function(b){var c,d,k,g,t,q,l,x=this;if(f.isPlainObject(b.accept)&&(b.accept=[b.accept]),b.accept){t=[];k=0;for(d=b.accept.length;d>k;k++)(g=b.accept[k].extensions)&&t.push(g);t.length&&(q="\\."+t.join(",").replace(/,/g,
"$|\\.").replace(/\*/g,".*")+"$");x.accept=new RegExp(q,"i")}return x.queue=new h,x.stats=x.queue.stats,"html5"===this.request("predict-runtime-type")?(c=e.Deferred(),l=new a("Placeholder"),l.connectRuntime({runtimeOrder:"html5"},function(){x._ruid=l.getRuid();c.resolve()}),c.promise()):void 0},_wrapFile:function(a){if(!(a instanceof c)){if(!(a instanceof b)){if(!this._ruid)throw Error("Can't add external files.");a=new b(this._ruid,a)}a=new c(a)}return a},acceptFile:function(a){return!(!a||6>a.size||
this.accept&&d.exec(a.name)&&!this.accept.test(a.name))},_addFile:function(a){return a=this._wrapFile(a),this.owner.trigger("beforeFileQueued",a)?this.acceptFile(a)?(this.queue.append(a),this.owner.trigger("fileQueued",a),a):void this.owner.trigger("error","Q_TYPE_DENIED",a):void 0},getFile:function(a){return this.queue.getFile(a)},addFiles:function(a){var b=this;a.length||(a=[a]);a=f.map(a,function(a){return b._addFile(a)});b.owner.trigger("filesQueued",a);b.options.auto&&b.request("start-upload")},
getStats:function(){return this.stats},removeFile:function(a){a=a.id?a:this.queue.getFile(a);a.setStatus(k.CANCELLED);this.owner.trigger("fileDequeued",a)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(a,b){var c,d,f;if(a)return a=a.id?a:this.queue.getFile(a),a.setStatus(k.QUEUED),void(b||this.request("start-upload"));c=this.queue.getFiles(k.ERROR);d=0;for(f=c.length;f>d;d++)a=c[d],
a.setStatus(k.QUEUED);this.request("start-upload")},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.queue=new h;this.stats=this.queue.stats}})}),l("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(e,g){return e.support=function(){return g.hasRuntime.apply(g,arguments)},e.register({"predict-runtime-type":"predictRuntmeType"},{init:function(){if(!this.predictRuntmeType())throw Error("Runtime Error");},predictRuntmeType:function(){var e,
c,b=this.options.runtimeOrder||g.orders,a=this.type;if(!a)for(b=b.split(/\s*,\s*/g),e=0,c=b.length;c>e;e++)if(g.hasRuntime(b[e])){this.type=a=b[e];break}return a}})}),l("lib/transport",["base","runtime/client","mediator"],function(e,g,h){function c(a){var f=this;a=f.options=b.extend(!0,{},c.options,a||{});g.call(this,"Transport");this._blob=null;this._formData=a.formData||{};this._headers=a.headers||{};this.on("progress",this._timeout);this.on("load error",function(){f.trigger("progress",1);clearTimeout(f._timer)})}
var b=e.$;return c.options={server:"",method:"POST",withCredentials:!1,fileVal:"file",timeout:12E4,formData:{},headers:{},sendAsBinary:!1},b.extend(c.prototype,{appendBlob:function(a,b,c){var k=this,m=k.options;k.getRuid()&&k.disconnectRuntime();k.connectRuntime(b.ruid,function(){k.exec("init")});k._blob=b;m.fileVal=a||m.fileVal;m.filename=c||m.filename},append:function(a,c){"object"==typeof a?b.extend(this._formData,a):this._formData[a]=c},setRequestHeader:function(a,c){"object"==typeof a?b.extend(this._headers,
a):this._headers[a]=c},send:function(a){this.exec("send",a);this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec("abort")},destroy:function(){this.trigger("destroy");this.off();this.exec("destroy");this.disconnectRuntime()},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var a=this,b=a.options.timeout;b&&(clearTimeout(a._timer),
a._timer=setTimeout(function(){a.abort();a.trigger("error","timeout")},b))}}),h.installTo(c.prototype),c}),l("widgets/upload",["base","uploader","file","lib/transport","widgets/widget"],function(e,g,h,c){function b(a,b){for(var c,d=[],f=a.source.size,e=b?Math.ceil(f/b):1,h=0,g=0;e>g;)c=Math.min(b,f-h),d.push({file:a,start:h,end:b?h+c:f,total:f,chunks:e,chunk:g++}),h+=c;return a.blocks=d.concat(),a.remaning=d.length,{file:a,has:function(){return!!d.length},fetch:function(){return d.shift()}}}var a=
e.$,f=e.isPromise,d=h.Status;a.extend(g.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,threads:3,formData:null});g.register({"start-upload":"start","stop-upload":"stop","skip-file":"skipFile","is-in-progress":"isInProgress"},{init:function(){var b=this.owner;this.runing=!1;this.pool=[];this.pending=[];this.remaning=0;this.__tick=e.bindFn(this._tick,this);b.on("uploadComplete",function(b){b.blocks&&a.each(b.blocks,function(a,b){b.transport&&(b.transport.abort(),b.transport.destroy());
delete b.transport});delete b.blocks;delete b.remaning})},start:function(){var b=this;a.each(b.request("get-files",d.INVALID),function(){b.request("remove-file",this)});b.runing||(b.runing=!0,a.each(b.pool,function(a,c){var f=c.file;f.getStatus()===d.INTERRUPT&&(f.setStatus(d.PROGRESS),b._trigged=!1,c.transport&&c.transport.send())}),b._trigged=!1,b.owner.trigger("startUpload"),e.nextTick(b.__tick))},stop:function(b){!1!==this.runing&&(this.runing=!1,b&&a.each(this.pool,function(a,b){b.transport&&
b.transport.abort();b.file.setStatus(d.INTERRUPT)}),this.owner.trigger("stopUpload"))},isInProgress:function(){return!!this.runing},getStats:function(){return this.request("get-stats")},skipFile:function(b,c){b=this.request("get-file",b);b.setStatus(c||d.COMPLETE);b.skipped=!0;b.blocks&&a.each(b.blocks,function(a,b){var c=b.transport;c&&(c.abort(),c.destroy(),delete b.transport)});this.owner.trigger("uploadSkip",b)},_tick:function(){var a,b,c=this,d=c.options;return c._promise?c._promise.always(c.__tick):
void(c.pool.length<d.threads&&(b=c._nextBlock())?(c._trigged=!1,a=function(a){c._promise=null;a&&a.file&&c._startSend(a);e.nextTick(c.__tick)},c._promise=f(b)?b.always(a):a(b)):c.remaning||c.getStats().numOfQueue||(c.runing=!1,c._trigged||e.nextTick(function(){c.owner.trigger("uploadFinished")}),c._trigged=!0))},_nextBlock:function(){var a,c,e=this,h=e._act,g=e.options;return h&&h.has()&&h.file.getStatus()===d.PROGRESS?(g.prepareNextFile&&!e.pending.length&&e._prepareNextFile(),h.fetch()):e.runing?
(!e.pending.length&&e.getStats().numOfQueue&&e._prepareNextFile(),a=e.pending.shift(),c=function(a){return a?(h=b(a,g.chunked?g.chunkSize:0),e._act=h,h.fetch()):null},f(a)?a[a.pipe?"pipe":"then"](c):c(a)):void 0},_prepareNextFile:function(){var b,c=this,f=c.request("fetch-file"),e=c.pending;f&&(b=c.request("before-send-file",f,function(){return f.getStatus()===d.QUEUED?(c.owner.trigger("uploadStart",f),f.setStatus(d.PROGRESS),f):c._finishFile(f)}),b.done(function(){var c=a.inArray(b,e);~c&&e.splice(c,
1,f)}),b.fail(function(a){f.setStatus(d.ERROR,a);c.owner.trigger("uploadError",f,a);c.owner.trigger("uploadComplete",f)}),e.push(b))},_popBlock:function(b){var c=a.inArray(b,this.pool);this.pool.splice(c,1);b.file.remaning--;this.remaning--},_startSend:function(a){var b=this,c=a.file;b.pool.push(a);b.remaning++;a.blob=1===a.chunks?c.source:c.source.slice(a.start,a.end);b.request("before-send",a,function(){c.getStatus()===d.PROGRESS?b._doSend(a):(b._popBlock(a),e.nextTick(b.__tick))}).fail(function(){1===
c.remaning?b._finishFile(c).always(function(){a.percentage=1;b._popBlock(a);b.owner.trigger("uploadComplete",c);e.nextTick(b.__tick)}):(a.percentage=1,b._popBlock(a),e.nextTick(b.__tick))})},_doSend:function(b){var f,h,g=this,n=g.owner,l=g.options,t=b.file,q=new c(l),u=a.extend({},l.formData),x=a.extend({},l.headers);b.transport=q;q.on("destroy",function(){delete b.transport;g._popBlock(b);e.nextTick(g.__tick)});q.on("progress",function(c){var d=0,f=0,d=b.percentage=c;1<b.chunks&&(a.each(t.blocks,
function(a,b){f+=(b.percentage||0)*(b.end-b.start)}),d=f/t.size);n.trigger("uploadProgress",t,d||0)});f=function(a){var c;return h=q.getResponseAsJson()||{},h._raw=q.getResponse(),c=function(b){a=b},n.trigger("uploadAccept",b,h,c)||(a=a||"server"),a};q.on("error",function(a,c){b.retried=b.retried||0;1<b.chunks&&~"http,abort".indexOf(a)&&b.retried<l.chunkRetry?(b.retried++,q.send()):(c||"server"!==a||(a=f(a)),t.setStatus(d.ERROR,a),n.trigger("uploadError",t,a),n.trigger("uploadComplete",t))});q.on("load",
function(){var a;return(a=f())?void q.trigger("error",a,!0):void(1===t.remaning?g._finishFile(t,h):q.destroy())});u=a.extend(u,{id:t.id,name:t.name,type:t.type,lastModifiedDate:t.lastModifiedDate,size:t.size});1<b.chunks&&a.extend(u,{chunks:b.chunks,chunk:b.chunk});n.trigger("uploadBeforeSend",b,u,x);q.appendBlob(l.fileVal,b.blob,t.name);q.append(u);q.setRequestHeader(x);q.send()},_finishFile:function(a,b,c){var f=this.owner;return f.request("after-send-file",arguments,function(){a.setStatus(d.COMPLETE);
f.trigger("uploadSuccess",a,b,c)}).fail(function(b){a.getStatus()===d.PROGRESS&&a.setStatus(d.ERROR,b);f.trigger("uploadError",a,b)}).always(function(){f.trigger("uploadComplete",a)})}})}),l("widgets/validator",["base","uploader","file","widgets/widget"],function(e,g,h){var c,b=e.$,a={};return c={addValidator:function(b,c){a[b]=c},removeValidator:function(b){delete a[b]}},g.register({init:function(){var c=this;b.each(a,function(){this.call(c.owner)})}}),c.addValidator("fileNumLimit",function(){var a=
0,b=this.options.fileNumLimit>>0,c=!0;b&&(this.on("beforeFileQueued",function(e){return a>=b&&c&&(c=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",b,e),setTimeout(function(){c=!0},1)),a>=b?!1:!0}),this.on("fileQueued",function(){a++}),this.on("fileDequeued",function(){a--}),this.on("uploadFinished",function(){a=0}))}),c.addValidator("fileSizeLimit",function(){var a=0,b=this.options.fileSizeLimit>>0,c=!0;b&&(this.on("beforeFileQueued",function(e){var h=a+e.size>b;return h&&c&&(c=!1,this.trigger("error",
"Q_EXCEED_SIZE_LIMIT",b,e),setTimeout(function(){c=!0},1)),h?!1:!0}),this.on("fileQueued",function(b){a+=b.size}),this.on("fileDequeued",function(b){a-=b.size}),this.on("uploadFinished",function(){a=0}))}),c.addValidator("fileSingleSizeLimit",function(){var a=this.options.fileSingleSizeLimit;a&&this.on("beforeFileQueued",function(b){return b.size>a?(b.setStatus(h.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",b),!1):void 0})}),c.addValidator("duplicate",function(){var a={};this.options.duplicate||
(this.on("beforeFileQueued",function(b){var c;if(!(c=b.__hash)){c=b.name+b.size+b.lastModifiedDate;for(var e,h=0,g=0,l=c.length;l>g;g++)e=c.charCodeAt(g),h=e+(h<<6)+(h<<16)-h;c=b.__hash=h}return a[c]?(this.trigger("error","F_DUPLICATE",b),!1):void 0}),this.on("fileQueued",function(b){(b=b.__hash)&&(a[b]=!0)}),this.on("fileDequeued",function(b){(b=b.__hash)&&delete a[b]}))}),c}),l("runtime/compbase",[],function(){return function(e,g){this.owner=e;this.options=e.options;this.getRuntime=function(){return g};
this.getRuid=function(){return g.uid};this.trigger=function(){return e.trigger.apply(e,arguments)}}}),l("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(e,g,h){function c(){var c={},d=this,k=this.destory;g.apply(d,arguments);d.type=b;d.exec=function(b,k){var h,g=this.uid,l=e.slice(arguments,2);return a[b]&&(h=c[g]=c[g]||new a[b](this,d),h[k])?h[k].apply(h,l):void 0};d.destory=function(){return k&&k.apply(this,arguments)}}var b="html5",a={};return e.inherits(g,{constructor:c,
init:function(){var a=this;setTimeout(function(){a.trigger("ready")},1)}}),c.register=function(b,c){return a[b]=e.inherits(h,c)},w.Blob&&w.FileReader&&w.DataView&&g.addRuntime(b,c),c}),l("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(e,g){return e.register("Blob",{slice:function(e,c){var b=this.owner.source;return b=(b.slice||b.webkitSlice||b.mozSlice).call(b,e,c),new g(this.getRuid(),b)}})}),l("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(e,g,h){var c=
e.$;return g.register("DragAndDrop",{init:function(){var b=this.elem=this.options.container;this.dragEnterHandler=e.bindFn(this._dragEnterHandler,this);this.dragOverHandler=e.bindFn(this._dragOverHandler,this);this.dragLeaveHandler=e.bindFn(this._dragLeaveHandler,this);this.dropHandler=e.bindFn(this._dropHandler,this);this.dndOver=!1;b.on("dragenter",this.dragEnterHandler);b.on("dragover",this.dragOverHandler);b.on("dragleave",this.dragLeaveHandler);b.on("drop",this.dropHandler);this.options.disableGlobalDnd&&
(c(document).on("dragover",this.dragOverHandler),c(document).on("drop",this.dropHandler))},_dragEnterHandler:function(b){var a,c=this._denied||!1;return b=b.originalEvent||b,this.dndOver||(this.dndOver=!0,a=b.dataTransfer.items,a&&a.length&&(this._denied=c=!this.trigger("accept",a)),this.elem.addClass("webuploader-dnd-over"),this.elem[c?"addClass":"removeClass"]("webuploader-dnd-denied")),b.dataTransfer.dropEffect=c?"none":"copy",!1},_dragOverHandler:function(b){var a=this.elem.parent().get(0);return a&&
!c.contains(a,b.currentTarget)?!1:(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,b),!1)},_dragLeaveHandler:function(){var b,a=this;return b=function(){a.dndOver=!1;a.elem.removeClass("webuploader-dnd-over webuploader-dnd-denied")},clearTimeout(a._leaveTimer),a._leaveTimer=setTimeout(b,100),!1},_dropHandler:function(b){var a=this,f=a.getRuid(),d=a.elem.parent().get(0);return d&&!c.contains(d,b.currentTarget)?!1:(a._getTansferFiles(b,function(b){a.trigger("drop",c.map(b,function(a){return new h(f,
a)}))}),a.dndOver=!1,a.elem.removeClass("webuploader-dnd-over"),!1)},_getTansferFiles:function(b,a){var c,d,k,h,g,l,n,y=[],t=[];b=b.originalEvent||b;d=b.dataTransfer;c=d.items;d=d.files;n=!(!c||!c[0].webkitGetAsEntry);g=0;for(l=d.length;l>g;g++)k=d[g],h=c&&c[g],n&&h.webkitGetAsEntry().isDirectory?t.push(this._traverseDirectoryTree(h.webkitGetAsEntry(),y)):y.push(k);e.when.apply(e,t).done(function(){y.length&&a(y)})},_traverseDirectoryTree:function(b,a){var c=e.Deferred(),d=this;return b.isFile?b.file(function(b){a.push(b);
c.resolve()}):b.isDirectory&&b.createReader().readEntries(function(b){var h,g=b.length,l=[],n=[];for(h=0;g>h;h++)l.push(d._traverseDirectoryTree(b[h],n));e.when.apply(e,l).then(function(){a.push.apply(a,n);c.resolve()},c.reject)}),c.promise()},destroy:function(){var b=this.elem;b.off("dragenter",this.dragEnterHandler);b.off("dragover",this.dragEnterHandler);b.off("dragleave",this.dragLeaveHandler);b.off("drop",this.dropHandler);this.options.disableGlobalDnd&&(c(document).off("dragover",this.dragOverHandler),
c(document).off("drop",this.dropHandler))}})}),l("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(e,g,h){return g.register("FilePaste",{init:function(){var c,b,a,f,d=this.options,h=this.elem=d.container,g=".*";if(d.accept){c=[];b=0;for(a=d.accept.length;a>b;b++)(f=d.accept[b].mimeTypes)&&c.push(f);c.length&&(g=c.join(","),g=g.replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=new RegExp(g,"i");this.hander=e.bindFn(this._pasteHander,this);h.on("paste",this.hander)},_pasteHander:function(c){var b,
a,f,d,e,g=[],p=this.getRuid();c=c.originalEvent||c;b=c.clipboardData.items;d=0;for(e=b.length;e>d;d++)a=b[d],"file"===a.kind&&(f=a.getAsFile())&&g.push(new h(p,f));g.length&&(c.preventDefault(),c.stopPropagation(),this.trigger("paste",g))},destroy:function(){this.elem.off("paste",this.hander)}})}),l("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(e,g){var h=e.$;return g.register("FilePicker",{init:function(){var c,b,a,f,d=this.getRuntime().getContainer(),e=this,g=e.owner,p=e.options,
l=h(document.createElement("label")),n=h(document.createElement("input"));if(n.attr("type","file"),n.attr("name",p.name),n.addClass("webuploader-element-invisible"),l.on("click",function(){n.trigger("click")}),l.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"}),p.multiple&&n.attr("multiple","multiple"),p.accept&&0<p.accept.length){c=[];b=0;for(a=p.accept.length;a>b;b++)c.push(p.accept[b].mimeTypes);n.attr("accept",c.join(","))}d.append(n);d.append(l);
f=function(a){g.trigger(a.type)};n.on("change",function(a){var b,c=arguments.callee;e.files=a.target.files;b=this.cloneNode(!0);this.parentNode.replaceChild(b,this);n.off();n=h(b).on("change",c).on("mouseenter mouseleave",f);g.trigger("change")});l.on("mouseenter mouseleave",f)},getFiles:function(){return this.files},destroy:function(){}})}),l("runtime/html5/util",["base"],function(e){var g=w.createObjectURL&&w||w.URL&&URL.revokeObjectURL&&URL||w.webkitURL,h=e=e.noop;return g&&(e=function(){return g.createObjectURL.apply(g,
arguments)},h=function(){return g.revokeObjectURL.apply(g,arguments)}),{createObjectURL:e,revokeObjectURL:h,dataURL2Blob:function(c){var b,a,f,d,e;e=c.split(",");c=~e[0].indexOf("base64")?atob(e[1]):decodeURIComponent(e[1]);a=new ArrayBuffer(c.length);b=new Uint8Array(a);for(f=0;f<c.length;f++)b[f]=c.charCodeAt(f);return d=e[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(a,d)},dataURL2ArrayBuffer:function(c){var b,a;c=c.split(",");c=~c[0].indexOf("base64")?atob(c[1]):decodeURIComponent(c[1]);
b=new Uint8Array(c.length);for(a=0;a<c.length;a++)b[a]=c.charCodeAt(a);return b.buffer},arrayBufferToBlob:function(c,b){var a,f=w.BlobBuilder||w.WebKitBlobBuilder;return f?(a=new f,a.append(c),a.getBlob(b)):new Blob([c],b?{type:b}:{})},canvasToDataUrl:function(c,b,a){return c.toDataURL(b,a/100)},parseMeta:function(c,b){b(!1,{})},updateImageHead:function(c){return c}}}),l("runtime/html5/imagemeta",["runtime/html5/util"],function(e){var g;return g={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(e,
c){var b=this,a=new FileReader;a.onload=function(){c(!1,b._parse(this.result));a=a.onload=a.onerror=null};a.onerror=function(b){c(b.message);a=a.onload=a.onerror=null};e=e.slice(0,b.maxMetaDataSize);a.readAsArrayBuffer(e.getSource())},_parse:function(e,c){if(!(6>e.byteLength)){var b,a,f,d,k=new DataView(e),m=2,p=k.byteLength-4;d=m;var l={};if(65496===k.getUint16(0)){for(;p>m&&(b=k.getUint16(m),65504<=b&&65519>=b||65534===b)&&(a=k.getUint16(m+2)+2,!(m+a>k.byteLength));){if(f=g.parsers[b],!c&&f)for(d=
0;d<f.length;d+=1)f[d].call(g,k,m,a,l);d=m+=a}6<d&&(l.imageHead=e.slice?e.slice(2,d):(new Uint8Array(e)).subarray(2,d))}return l}},updateImageHead:function(e,c){var b,a,f,d=this._parse(e,!0);return f=2,d.imageHead&&(f=2+d.imageHead.byteLength),a=e.slice?e.slice(f):(new Uint8Array(e)).subarray(f),b=new Uint8Array(c.byteLength+2+a.byteLength),b[0]=255,b[1]=216,b.set(new Uint8Array(c),2),b.set(new Uint8Array(a),c.byteLength+2),b.buffer}},e.parseMeta=function(){return g.parse.apply(g,arguments)},e.updateImageHead=
function(){return g.updateImageHead.apply(g,arguments)},g}),l("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(e,g){var h={};return h.ExifMap=function(){return this},h.ExifMap.prototype.map={Orientation:274},h.ExifMap.prototype.get=function(c){return this[c]||this[this.map[c]]},h.exifTagTypes={1:{getValue:function(c,b){return c.getUint8(b)},size:1},2:{getValue:function(c,b){return String.fromCharCode(c.getUint8(b))},size:1,ascii:!0},3:{getValue:function(c,b,a){return c.getUint16(b,
a)},size:2},4:{getValue:function(c,b,a){return c.getUint32(b,a)},size:4},5:{getValue:function(c,b,a){return c.getUint32(b,a)/c.getUint32(b+4,a)},size:8},9:{getValue:function(c,b,a){return c.getInt32(b,a)},size:4},10:{getValue:function(c,b,a){return c.getInt32(b,a)/c.getInt32(b+4,a)},size:8}},h.exifTagTypes[7]=h.exifTagTypes[1],h.getExifValue=function(c,b,a,f,d,k){var g,p,l;f=h.exifTagTypes[f];if(!f)return void e.log("Invalid Exif data: Invalid tag type.");if(g=f.size*d,p=4<g?b+c.getUint32(a+8,k):
a+8,p+g>c.byteLength)return void e.log("Invalid Exif data: Invalid data offset.");if(1===d)return f.getValue(c,p,k);b=[];for(a=0;d>a;a+=1)b[a]=f.getValue(c,p+a*f.size,k);if(f.ascii){c="";for(a=0;a<b.length&&(l=b[a],"\x00"!==l);a+=1)c+=l;return c}return b},h.parseExifTag=function(c,b,a,f,d){var e=c.getUint16(a,f);d.exif[e]=h.getExifValue(c,b,a,c.getUint16(a+2,f),c.getUint32(a+4,f),f)},h.parseExifTags=function(c,b,a,f,d){var h,g,l;if(a+6>c.byteLength)return void e.log("Invalid Exif data: Invalid directory offset.");
if(h=c.getUint16(a,f),g=a+2+12*h,g+4>c.byteLength)return void e.log("Invalid Exif data: Invalid directory size.");for(l=0;h>l;l+=1)this.parseExifTag(c,b,a+2+12*l,f,d);return c.getUint32(g,f)},h.parseExifData=function(c,b,a,f){var d;a=b+10;if(1165519206===c.getUint32(b+4)){if(a+8>c.byteLength)return void e.log("Invalid Exif data: Invalid segment size.");if(0!==c.getUint16(b+8))return void e.log("Invalid Exif data: Missing byte alignment offset.");switch(c.getUint16(a)){case 18761:b=!0;break;case 19789:b=
!1;break;default:return void e.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==c.getUint16(a+2,b))return void e.log("Invalid Exif data: Missing TIFF marker.");d=c.getUint32(a+4,b);f.exif=new h.ExifMap;h.parseExifTags(c,a,a+d,b,f)}},g.parsers[65505].push(h.parseExifData),h}),l("runtime/html5/jpegencoder",[],function(){function e(e){function h(a,b){for(var c=0,d=0,f=[],e=1;16>=e;e++){for(var h=1;h<=a[e];h++)f[b[d]]=[],f[b[d]][0]=c,f[b[d]][1]=e,d++,c++;c*=2}return f}function c(a){var c=
a[0];for(a=a[1]-1;0<=a;)c&1<<a&&(I|=1<<D),a--,D--,0>D&&(255==I?(b(255),b(0)):b(I),D=7,I=0)}function b(a){L.push(N[a])}function a(a){b(a>>8&255);b(255&a)}function f(a,b,d,f,e){var h,k=e[0],g=e[240],m,l,p,n,q,r,t,u,y,v=0;for(y=0;8>y;++y){m=a[v];l=a[v+1];p=a[v+2];n=a[v+3];q=a[v+4];r=a[v+5];t=a[v+6];u=a[v+7];var x=m+u;m-=u;u=l+t;l-=t;t=p+r;p-=r;r=n+q;n-=q;q=x+r;x-=r;r=u+t;u-=t;a[v]=q+r;a[v+4]=q-r;q=.707106781*(u+x);a[v+2]=x+q;a[v+6]=x-q;q=n+p;r=p+l;u=l+m;p=.382683433*(q-u);n=.5411961*q+p;q=1.306562965*
u+p;r*=.707106781;p=m+r;m-=r;a[v+5]=m+n;a[v+3]=m-n;a[v+1]=p+q;a[v+7]=p-q;v+=8}for(y=v=0;8>y;++y)m=a[v],l=a[v+8],p=a[v+16],n=a[v+24],q=a[v+32],r=a[v+40],t=a[v+48],u=a[v+56],x=m+u,m-=u,u=l+t,l-=t,t=p+r,p-=r,r=n+q,n-=q,q=x+r,x-=r,r=u+t,u-=t,a[v]=q+r,a[v+32]=q-r,q=.707106781*(u+x),a[v+16]=x+q,a[v+48]=x-q,q=n+p,r=p+l,u=l+m,p=.382683433*(q-u),n=.5411961*q+p,q=1.306562965*u+p,r*=.707106781,p=m+r,m-=r,a[v+40]=m+n,a[v+24]=m-n,a[v+8]=p+q,a[v+56]=p-q,v++;for(y=0;64>y;++y)v=a[y]*b[y],M[y]=0<v?v+.5|0:v-.5|0;a=
M;for(b=0;64>b;++b)C[E[b]]=a[b];a=C[0]-d;d=C[0];0==a?c(f[0]):(h=32767+a,c(f[z[h]]),c(w[h]));for(f=63;0<f&&0==C[f];f--);if(0==f)return c(k),d;for(a=1;f>=a;){for(h=a;0==C[a]&&f>=a;++a);b=a-h;if(16<=b){h=b>>4;for(y=1;h>=y;++y)c(g);b&=15}h=32767+C[a];c(e[(b<<4)+z[h]]);c(w[h]);a++}return 63!=f&&c(k),d}function d(a){if(0>=a&&(a=1),100<a&&(a=100),n!=a){for(var b=0,b=Math.floor(50>a?5E3/a:200-2*a),c=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,
56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],d=0;64>d;d++){var f=y((c[d]*b+50)/100);1>f?f=1:255<f&&(f=255);t[E[d]]=f}c=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];for(d=0;64>d;d++)f=y((c[d]*b+50)/100),1>f?f=1:255<f&&(f=255),q[E[d]]=f;b=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,
.275899379];for(d=c=0;8>d;d++)for(f=0;8>f;f++)u[c]=1/(t[E[c]]*b[d]*b[f]*8),x[c]=1/(q[E[c]]*b[d]*b[f]*8),c++;n=a}}var k,m,l,r,n,y=(Math.round,Math.floor),t=Array(64),q=Array(64),u=Array(64),x=Array(64),w=Array(65535),z=Array(65535),M=Array(64),C=Array(64),L=[],I=0,D=7,O=Array(64),P=Array(64),Q=Array(64),N=Array(256),A=Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,
49,57,58,62,63],R=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],U=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,
168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],V=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Y=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,
72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(e,h){h&&d(h);L=[];I=0;D=7;a(65496);a(65504);a(16);b(74);b(70);b(73);b(70);b(0);b(1);b(1);b(0);a(1);
a(1);b(0);b(0);a(65499);a(132);b(0);for(var g=0;64>g;g++)b(t[g]);b(1);for(g=0;64>g;g++)b(q[g]);var g=e.width,n=e.height;a(65472);a(17);b(8);a(n);a(g);b(3);b(1);b(17);b(0);b(2);b(17);b(1);b(3);b(17);b(1);a(65476);a(418);b(0);for(g=0;16>g;g++)b(R[g+1]);for(g=0;11>=g;g++)b(S[g]);b(16);for(g=0;16>g;g++)b(T[g+1]);for(g=0;161>=g;g++)b(U[g]);b(1);for(g=0;16>g;g++)b(V[g+1]);for(g=0;11>=g;g++)b(W[g]);b(17);for(g=0;16>g;g++)b(X[g+1]);for(g=0;161>=g;g++)b(Y[g]);a(65498);a(12);b(3);b(1);b(0);b(2);b(17);b(3);
b(17);b(0);b(63);b(0);var y=n=g=0;I=0;D=7;this.encode.displayName="_encode_";for(var w,z,F,B,C,G,E=e.data,H=e.height,J=4*e.width,K=0;H>K;){for(w=0;J>w;){C=J*K+w;for(G=0;64>G;G++)F=G>>3,z=4*(7&G),B=C+F*J+z,K+F>=H&&(B-=J*(K+1+F-H)),w+z>=J&&(B-=w+z-J+4),z=E[B++],F=E[B++],B=E[B++],O[G]=(A[z]+A[F+256>>0]+A[B+512>>0]>>16)-128,P[G]=(A[z+768>>0]+A[F+1024>>0]+A[B+1280>>0]>>16)-128,Q[G]=(A[z+1280>>0]+A[F+1536>>0]+A[B+1792>>0]>>16)-128;g=f(O,u,g,k,l);n=f(P,x,n,m,r);y=f(Q,x,y,m,r);w+=32}K+=8}0<=D&&(g=[],g[1]=
D+1,g[0]=(1<<D+1)-1,c(g));a(65497);g="data:image/jpeg;base64,"+btoa(L.join(""));return L=[],g};e||(e=50);(function(){for(var a=String.fromCharCode,b=0;256>b;b++)N[b]=a(b)})();k=h(R,S);m=h(V,W);l=h(T,U);r=h(X,Y);(function(){for(var a=1,b=2,c=1;15>=c;c++){for(var d=a;b>d;d++)z[32767+d]=c,w[32767+d]=[],w[32767+d][1]=c,w[32767+d][0]=d;for(d=-(b-1);-a>=d;d++)z[32767+d]=c,w[32767+d]=[],w[32767+d][1]=c,w[32767+d][0]=b-1+d;a<<=1;b<<=1}})();(function(){for(var a=0;256>a;a++)A[a]=19595*a,A[a+256>>0]=38470*
a,A[a+512>>0]=7471*a+32768,A[a+768>>0]=-11059*a,A[a+1024>>0]=-21709*a,A[a+1280>>0]=32768*a+8421375,A[a+1536>>0]=-27439*a,A[a+1792>>0]=-5329*a})();d(e)}return e.encode=function(g,h){return(new e(h)).encode(g)},e}),l("runtime/html5/androidpatch",["runtime/html5/util","runtime/html5/jpegencoder","base"],function(e,g,h){var c,b=e.canvasToDataUrl;e.canvasToDataUrl=function(a,f,d){var e,m,l,r,n;return h.os.android?("image/jpeg"===f&&"undefined"==typeof c&&(r=b.apply(null,arguments),n=r.split(","),r=~n[0].indexOf("base64")?
atob(n[1]):decodeURIComponent(n[1]),r=r.substring(0,2),c=255===r.charCodeAt(0)&&216===r.charCodeAt(1)),"image/jpeg"!==f||c?b.apply(null,arguments):(m=a.width,l=a.height,e=a.getContext("2d"),g.encode(e.getImageData(0,0,m,l),d))):b.apply(null,arguments)}}),l("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(e,g,h){return g.register("Image",{modified:!1,init:function(){var c=this,b=new Image;b.onload=function(){c._info={type:c.type,width:this.width,height:this.height};
c._metas||"image/jpeg"!==c.type?c.owner.trigger("load"):h.parseMeta(c._blob,function(a,b){c._metas=b;c.owner.trigger("load")})};b.onerror=function(){c.owner.trigger("error")};c._img=b},loadFromBlob:function(c){var b=this._img;this._blob=c;this.type=c.type;b.src=h.createObjectURL(c.getSource());this.owner.once("load",function(){h.revokeObjectURL(b.src)})},resize:function(c,b){var a=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,a,c,b);this._blob=null;this.modified=
!0;this.owner.trigger("complete")},getAsBlob:function(c){var b;b=this._blob;var a=this.options;if(c=c||this.type,this.modified||this.type!==c){if(b=this._canvas,"image/jpeg"===c){if(b=h.canvasToDataUrl(b,"image/jpeg",a.quality),a.preserveHeaders&&this._metas&&this._metas.imageHead)return b=h.dataURL2ArrayBuffer(b),b=h.updateImageHead(b,this._metas.imageHead),h.arrayBufferToBlob(b,c)}else b=h.canvasToDataUrl(b,c);b=h.dataURL2Blob(b)}return b},getAsDataUrl:function(c){var b=this.options;return c=c||
this.type,"image/jpeg"===c?h.canvasToDataUrl(this._canvas,c,b.quality):this._canvas.toDataURL(c)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(c){return c?(this._info=c,this):this._info},meta:function(c){return c?(this._meta=c,this):this._meta},destroy:function(){var c=this._canvas;this._img.onload=null;c&&(c.getContext("2d").clearRect(0,0,c.width,c.height),c.width=c.height=0,this._canvas=null);this._img.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";
this._img=this._blob=null},_resize:function(c,b,a,f){var d,e,g=this.options;e=c.width;var h=c.height,l=this.getOrientation();~[5,6,7,8].indexOf(l)&&(a^=f,f^=a,a^=f);d=Math[g.crop?"max":"min"](a/e,f/h);g.allowMagnify||(d=Math.min(1,d));e*=d;d*=h;g.crop?(b.width=a,b.height=f):(b.width=e,b.height=d);a=(b.width-e)/2;f=(b.height-d)/2;g.preserveHeaders||this._rotate2Orientaion(b,l);this._renderImageToCanvas(b,c,a,f,e,d)},_rotate2Orientaion:function(c,b){var a=c.width,f=c.height,d=c.getContext("2d");switch(b){case 5:case 6:case 7:case 8:c.width=
f,c.height=a}switch(b){case 2:d.translate(a,0);d.scale(-1,1);break;case 3:d.translate(a,f);d.rotate(Math.PI);break;case 4:d.translate(0,f);d.scale(1,-1);break;case 5:d.rotate(.5*Math.PI);d.scale(1,-1);break;case 6:d.rotate(.5*Math.PI);d.translate(0,-f);break;case 7:d.rotate(.5*Math.PI);d.translate(a,-f);d.scale(-1,1);break;case 8:d.rotate(-.5*Math.PI),d.translate(-a,0)}},_renderImageToCanvas:function(){function c(b,a,c){var d,e;d=document.createElement("canvas");var g=d.getContext("2d");a=0;var h=
c,l=c;d.width=1;d.height=c;g.drawImage(b,0,0);for(b=g.getImageData(0,0,1,c).data;l>a;)d=b[4*(l-1)+3],0===d?h=l:a=l,l=h+a>>1;return e=l/c,0===e?1:e}return e.os.ios?7<=e.os.ios?function(b,a,f,d,e,g){var h=a.naturalWidth,l=a.naturalHeight,n=c(a,h,l);return b.getContext("2d").drawImage(a,0,0,h*n,l*n,f,d,e,g)}:function(b,a,f,d,e,g){var h,l,n,y,t=a.naturalWidth,q=a.naturalHeight;b=b.getContext("2d");var u,x;h=a.naturalWidth;h=1048576<h*a.naturalHeight?(u=document.createElement("canvas"),u.width=u.height=
1,x=u.getContext("2d"),x.drawImage(a,-h+1,0),0===x.getImageData(0,0,1,1).data[3]):!1;n="image/jpeg"===this.type;x=u=0;h&&(t/=2,q/=2);b.save();h=document.createElement("canvas");h.width=h.height=1024;l=h.getContext("2d");n=n?c(a,t,q):1;e=Math.ceil(1024*e/t);for(g=Math.ceil(1024*g/q/n);q>u;){for(y=n=0;t>n;)l.clearRect(0,0,1024,1024),l.drawImage(a,-n,-u),b.drawImage(h,0,0,1024,1024,f+y,d+x,e,g),n+=1024,y+=e;u+=1024;x+=g}b.restore()}:function(b,a,c,d,e,g){b.getContext("2d").drawImage(a,c,d,e,g)}}()})}),
l("runtime/html5/transport",["base","runtime/html5/runtime"],function(e,g){var h=e.noop,c=e.$;return g.register("Transport",{init:function(){this._status=0;this._response=null},send:function(){var b,a,f,d=this.owner,g=this.options,h=this._initAjax(),l=d._blob,r=g.server;g.sendAsBinary?(r+=(/\?/.test(r)?"&":"?")+c.param(d._formData),a=l.getSource()):(b=new FormData,c.each(d._formData,function(a,c){b.append(a,c)}),b.append(g.fileVal,l.getSource(),g.filename||d._formData.name||""));g.withCredentials&&
"withCredentials"in h?(h.open(g.method,r,!0),h.withCredentials=!0):h.open(g.method,r);this._setRequestHeader(h,g.headers);a?(h.overrideMimeType("application/octet-stream"),e.os.android?(f=new FileReader,f.onload=function(){h.send(this.result);f=f.onload=null},f.readAsArrayBuffer(a)):h.send(a)):h.send(b)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getStatus:function(){return this._status},abort:function(){var b=this._xhr;b&&(b.upload.onprogress=
h,b.onreadystatechange=h,b.abort(),this._xhr=null)},destroy:function(){this.abort()},_initAjax:function(){var b=this,a=new XMLHttpRequest;return!this.options.withCredentials||"withCredentials"in a||"undefined"==typeof XDomainRequest||(a=new XDomainRequest),a.upload.onprogress=function(a){var c=0;return a.lengthComputable&&(c=a.loaded/a.total),b.trigger("progress",c)},a.onreadystatechange=function(){return 4===a.readyState?(a.upload.onprogress=h,a.onreadystatechange=h,b._xhr=null,b._status=a.status,
200<=a.status&&300>a.status?(b._response=a.responseText,b.trigger("load")):500<=a.status&&600>a.status?(b._response=a.responseText,b.trigger("error","server")):b.trigger("error",b._status?"http":"abort")):void 0},b._xhr=a,a},_setRequestHeader:function(b,a){c.each(a,function(a,c){b.setRequestHeader(a,c)})},_parseJson:function(b){var a;try{a=JSON.parse(b)}catch(c){a={}}return a}})}),l("runtime/flash/runtime",["base","runtime/runtime","runtime/compbase"],function(e,g,h){function c(){function b(a,c){var d,
e;d=a.type||a;d=d.split("::");e=d[0];d=d[1];"Ready"===d&&e===r.uid?r.trigger("ready"):h[e]&&h[e].trigger(d.toLowerCase(),a,c)}var c={},h={},l=this.destory,r=this,n=e.guid("webuploader_");g.apply(r,arguments);r.type=a;r.exec=function(a,b){var d,g=this.uid,l=e.slice(arguments,2);return h[g]=this,f[a]&&(c[g]||(c[g]=new f[a](this,r)),d=c[g],d[b])?d[b].apply(d,l):r.flashExec.apply(this,arguments)};w[n]=function(){var a=arguments;setTimeout(function(){b.apply(null,a)},1)};this.jsreciver=n;this.destory=
function(){return l&&l.apply(this,arguments)};this.flashExec=function(a,b){var c=r.getFlash(),d=e.slice(arguments,2);return c.exec(this.uid,a,b,d)}}var b=e.$,a="flash",f={};return e.inherits(g,{constructor:c,init:function(){var a,b=this.getContainer(),c=this.options;b.css({position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"});a='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+c.swf+'" ';e.browser.ie&&(a+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ');
a+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+c.swf+'" /><param name="flashvars" value="uid='+this.uid+"&jsreciver="+this.jsreciver+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';b.html(a)},getFlash:function(){return this._flash?this._flash:(this._flash=b("#"+this.uid).get(0),this._flash)}}),c.register=function(a,c){return c=f[a]=e.inherits(h,b.extend({flashExec:function(){var a=this.owner;return this.getRuntime().flashExec.apply(a,
arguments)}},c))},11.4<=function(){var a;try{a=navigator.plugins["Shockwave Flash"],a=a.description}catch(b){try{a=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(c){a="0.0"}}return a=a.match(/\d+/g),parseFloat(a[0]+"."+a[1],10)}()&&g.addRuntime(a,c),c}),l("runtime/flash/filepicker",["base","runtime/flash/runtime"],function(e,g){var h=e.$;return g.register("FilePicker",{init:function(c){var b,a=h.extend({},c);c=a.accept&&a.accept.length;for(b=0;c>b;b++)a.accept[b].title||
(a.accept[b].title="Files");delete a.button;delete a.container;this.flashExec("FilePicker","init",a)},destroy:function(){}})}),l("runtime/flash/image",["runtime/flash/runtime"],function(e){return e.register("Image",{loadFromBlob:function(e){var h=this.owner;h.info()&&this.flashExec("Image","info",h.info());h.meta()&&this.flashExec("Image","meta",h.meta());this.flashExec("Image","loadFromBlob",e.uid)}})}),l("runtime/flash/transport",["base","runtime/flash/runtime","runtime/client"],function(e,g,h){var c=
e.$;return g.register("Transport",{init:function(){this._status=0;this._responseJson=this._response=null},send:function(){var b,a=this.owner,e=this.options,d=this._initAjax(),g=a._blob,h=e.server;d.connectRuntime(g.ruid);e.sendAsBinary?(h+=(/\?/.test(h)?"&":"?")+c.param(a._formData),b=g.uid):(c.each(a._formData,function(a,b){d.exec("append",a,b)}),d.exec("appendBlob",e.fileVal,g.uid,e.filename||a._formData.name||""));this._setRequestHeader(d,e.headers);d.exec("send",{method:e.method,url:h},b)},getStatus:function(){return this._status},
getResponse:function(){return this._response},getResponseAsJson:function(){return this._responseJson},abort:function(){var b=this._xhr;b&&(b.exec("abort"),b.destroy(),this._xhr=null)},destroy:function(){this.abort()},_initAjax:function(){var b=this,a=new h("XMLHttpRequest");return a.on("uploadprogress progress",function(a){return b.trigger("progress",a.loaded/a.total)}),a.on("load",function(){var c=a.exec("getStatus"),d="";return a.off(),b._xhr=null,200<=c&&300>c?(b._response=a.exec("getResponse"),
b._responseJson=a.exec("getResponseAsJson")):500<=c&&600>c?(b._response=a.exec("getResponse"),b._responseJson=a.exec("getResponseAsJson"),d="server"):d="http",a.destroy(),a=null,d?b.trigger("error",d):b.trigger("load")}),a.on("error",function(){a.off();b._xhr=null;b.trigger("error","http")}),b._xhr=a,a},_setRequestHeader:function(b,a){c.each(a,function(a,c){b.exec("setRequestHeader",a,c)})}})}),l("preset/all","base widgets/filednd widgets/filepaste widgets/filepicker widgets/image widgets/queue widgets/runtime widgets/upload widgets/validator runtime/html5/blob runtime/html5/dnd runtime/html5/filepaste runtime/html5/filepicker runtime/html5/imagemeta/exif runtime/html5/androidpatch runtime/html5/image runtime/html5/transport runtime/flash/filepicker runtime/flash/image runtime/flash/transport".split(" "),
function(e){return e}),l("webuploader",["preset/all"],function(e){return e}),z("webuploader")});