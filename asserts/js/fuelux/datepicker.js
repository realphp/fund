(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):c(jQuery)})(function(c){var k=[],f=!1,y=c.fn.datepicker,t=!1,r=function(){var a,b;t=!0;a=0;for(b=k.length;a<b;a++)k[a].init.call(k[a].scope);k=[]};"function"===typeof define&&define.amd?require(["moment"],function(a){f=a;r()},function(a){"moment"===(a.requireModules&&a.requireModules[0])&&r()}):r();var q=function(a,b){this.$element=c(a);this.options=c.extend(!0,{},c.fn.datepicker.defaults,b);this.$calendar=this.$element.find(".datepicker-calendar");
this.$days=this.$calendar.find(".datepicker-calendar-days");this.$header=this.$calendar.find(".datepicker-calendar-header");this.$headerTitle=this.$header.find(".title");this.$input=this.$element.find("input");this.$wheels=this.$element.find(".datepicker-wheels");this.$wheelsMonth=this.$element.find(".datepicker-wheels-month");this.$wheelsYear=this.$element.find(".datepicker-wheels-year");this.artificialScrolling=!1;this.formatDate=this.options.formatDate||this.formatDate;this.inputValue=null;this.moment=
!1;this.momentFormat=null;this.parseDate=this.options.parseDate||this.parseDate;this.preventBlurHide=!1;this.restricted=this.options.restricted||[];this.restrictedParsed=[];this.restrictedText=this.options.restrictedText;this.sameYearOnly=this.options.sameYearOnly;this.yearRestriction=this.selectedDate=null;this.$calendar.find(".datepicker-today").on("click.fu.datepicker",c.proxy(this.todayClicked,this));this.$days.on("click.fu.datepicker","tr td button",c.proxy(this.dateClicked,this));this.$element.find(".dropdown-menu").on("mousedown.fu.datepicker",
c.proxy(this.dropdownMousedown,this));this.$header.find(".next").on("click.fu.datepicker",c.proxy(this.next,this));this.$header.find(".prev").on("click.fu.datepicker",c.proxy(this.prev,this));this.$headerTitle.on("click.fu.datepicker",c.proxy(this.titleClicked,this));this.$input.on("blur.fu.datepicker",c.proxy(this.inputBlurred,this));this.$input.on("focus.fu.datepicker",c.proxy(this.inputFocused,this));this.$wheels.find(".datepicker-wheels-back").on("click.fu.datepicker",c.proxy(this.backClicked,
this));this.$wheels.find(".datepicker-wheels-select").on("click.fu.datepicker",c.proxy(this.selectClicked,this));this.$wheelsMonth.on("click.fu.datepicker","ul button",c.proxy(this.monthClicked,this));this.$wheelsYear.on("click.fu.datepicker","ul button",c.proxy(this.yearClicked,this));this.$wheelsYear.find("ul").on("scroll.fu.datepicker",c.proxy(this.onYearScroll,this));var m=function(){this.checkForMomentJS()&&(f=f||window.moment,this.moment=!0,this.momentFormat=this.options.momentConfig.format,
this.setCulture(this.options.momentConfig.culture),f.locale=f.locale||f.lang);this.setRestrictedDates(this.restricted);this.setDate(this.options.date)||(this.$input.val(""),this.inputValue=this.$input.val());this.sameYearOnly&&(this.yearRestriction=this.selectedDate?this.selectedDate.getFullYear():(new Date).getFullYear())};t?m.call(this):k.push({init:m,scope:this})};q.prototype={constructor:q,backClicked:function(){this.changeView("calendar")},changeView:function(a,b){"wheels"===a?(this.$calendar.hide().attr("aria-hidden",
"true"),this.$wheels.show().removeAttr("aria-hidden",""),b&&this.renderWheel(b)):(this.$wheels.hide().attr("aria-hidden","true"),this.$calendar.show().removeAttr("aria-hidden",""),b&&this.renderMonth(b))},checkForMomentJS:function(){return(c.isFunction(window.moment)||"undefined"!==typeof f&&c.isFunction(f))&&c.isPlainObject(this.options.momentConfig)&&this.options.momentConfig.culture&&this.options.momentConfig.format?!0:!1},dateClicked:function(a){a=c(a.currentTarget).parents("td:first");a.hasClass("restricted")||
(this.$days.find("td.selected").removeClass("selected"),a.addClass("selected"),this.selectedDate=a=new Date(a.attr("data-year"),a.attr("data-month"),a.attr("data-date")),this.$input.val(this.formatDate(a)),this.inputValue=this.$input.val(),this.$input.focus(),this.$element.trigger("dateClicked.fu.datepicker",a))},destroy:function(){this.$element.remove();this.$days.find("tbody").empty();this.$wheelsYear.find("ul").empty();return this.$element[0].outerHTML},disable:function(){this.$element.addClass("disabled");
this.$element.find("input, button").attr("disabled","disabled");this.$element.find(".input-group-btn").removeClass("open")},dropdownMousedown:function(){var a=this;this.preventBlurHide=!0;setTimeout(function(){a.preventBlurHide=!1},0)},enable:function(){this.$element.removeClass("disabled");this.$element.find("input, button").removeAttr("disabled")},formatDate:function(a){var b=function(a){a="0"+a;return a.substr(a.length-2)};return this.moment?f(a).format(this.momentFormat):b(a.getMonth()+1)+"/"+
b(a.getDate())+"/"+a.getFullYear()},getCulture:function(){if(this.moment)return f.locale();throw"moment.js is not available so you cannot use this function";},getDate:function(){return this.selectedDate?this.selectedDate:new Date(NaN)},getFormat:function(){if(this.moment)return this.momentFormat;throw"moment.js is not available so you cannot use this function";},getFormattedDate:function(){return this.selectedDate?this.formatDate(this.selectedDate):"Invalid Date"},getRestrictedDates:function(){return this.restricted},
inputBlurred:function(a){a=this.$input.val();var b;a!==this.inputValue&&(b=this.setDate(a),null===b?this.$element.trigger("inputParsingFailed.fu.datepicker",a):!1===b?this.$element.trigger("inputRestrictedDate.fu.datepicker",b):this.$element.trigger("changed.fu.datepicker",b));this.preventBlurHide||this.$element.find(".input-group-btn").removeClass("open")},inputFocused:function(a){this.$element.find(".input-group-btn").addClass("open")},isInvalidDate:function(a){a=a.toString();return"Invalid Date"===
a||"NaN"===a?!0:!1},isRestricted:function(a,b,c){var d=this.restrictedParsed,e,g,x,f;if(this.sameYearOnly&&null!==this.yearRestriction&&c!==this.yearRestriction)return!0;e=0;for(x=d.length;e<x;e++)if(g=d[e].from,f=d[e].to,(c>g.year||c===g.year&&b>g.month||c===g.year&&b===g.month&&a>=g.date)&&(c<f.year||c===f.year&&b<f.month||c===f.year&&b===f.month&&a<=f.date))return!0;return!1},monthClicked:function(a){this.$wheelsMonth.find(".selected").removeClass("selected");c(a.currentTarget).parent().addClass("selected")},
next:function(){var a=this.$headerTitle.attr("data-month"),b=this.$headerTitle.attr("data-year");a++;if(11<a){if(this.sameYearOnly)return;a=0;b++}this.renderMonth(new Date(b,a,1))},onYearScroll:function(a){if(!this.artificialScrolling){a=c(a.currentTarget);var b="border-box"===a.css("box-sizing")?a.outerHeight():a.height(),m=a.get(0).scrollHeight,d=a.scrollTop(),b=b/(m-d)*100,e;if(5>d/m*100){e=parseInt(a.find("li:first").attr("data-year"),10);for(b=e-1;b>e-11;b--)a.prepend('<li data-year="'+b+'"><button type="button">'+
b+"</button></li>");this.artificialScrolling=!0;a.scrollTop(a.get(0).scrollHeight-m+d);this.artificialScrolling=!1}else if(90<b)for(e=parseInt(a.find("li:last").attr("data-year"),10),b=e+1;b<e+11;b++)a.append('<li data-year="'+b+'"><button type="button">'+b+"</button></li>")}},parseDate:function(a){var b=this,c=new Date(NaN),d,e,g;if(a){if(this.moment)return e=function(a){a=f(a,b.momentFormat);return!0===a.isValid()?a.toDate():c},d=function(a){a=f(new Date(a));return!0===a.isValid()?a.toDate():c},
g=function(a,d,e){a=d(a);if(!b.isInvalidDate(a))return a;a=e(a);return b.isInvalidDate(a)?c:a},"string"===typeof a?g(a,e,d):g(a,d,e);if("string"===typeof a)if(d=new Date(Date.parse(a)),this.isInvalidDate(d)){if(a=a.split("T")[0],d=/^\s*(\d{4})-(\d\d)-(\d\d)\s*$/,d=d.exec(a))if(a=parseInt(d[2],10),d=new Date(d[1],a-1,d[3]),a===d.getMonth()+1)return d}else return d;else if(d=new Date(a),!this.isInvalidDate(d))return d}return new Date(NaN)},prev:function(){var a=this.$headerTitle.attr("data-month"),
b=this.$headerTitle.attr("data-year");a--;if(0>a){if(this.sameYearOnly)return;a=11;b--}this.renderMonth(new Date(b,a,1))},renderMonth:function(a){a=a||new Date;var b=(new Date(a.getFullYear(),a.getMonth(),1)).getDay(),m=(new Date(a.getFullYear(),a.getMonth()+1,0)).getDate(),d=(new Date(a.getFullYear(),a.getMonth(),0)).getDate(),e=this.$headerTitle.find(".month"),g=a.getMonth(),f=new Date,k=f.getDate(),q=f.getMonth(),f=f.getFullYear(),n=this.selectedDate,r=this.$days.find("tbody");a=a.getFullYear();
var l,u,v,t,p,h,w;n&&(n={date:n.getDate(),month:n.getMonth(),year:n.getFullYear()});e.find(".current").removeClass("current");e.find('span[data-month="'+g+'"]').addClass("current");this.$headerTitle.find(".year").text(a);this.$headerTitle.attr({"data-month":g,"data-year":a});r.empty();0!==b?(e=d-b+1,p=-1):(e=1,p=0);t=m<=35-b?5:6;for(u=0;u<t;u++){w=c("<tr></tr>");for(v=0;7>v;v++){h=c("<td></td>");-1===p?h.addClass("last-month"):1===p&&h.addClass("next-month");b=g+p;l=a;0>b?(b=11,l--):11<b&&(b=0,l++);
h.attr({"data-date":e,"data-month":b,"data-year":l});if(l===f&&b===q&&e===k)h.addClass("current-day");else if(l<f||l===f&&b<q||l===f&&b===q&&e<k)h.addClass("past"),this.options.allowPastDates||h.addClass("restricted").attr("title",this.restrictedText);this.isRestricted(e,b,l)&&h.addClass("restricted").attr("title",this.restrictedText);n&&l===n.year&&b===n.month&&e===n.date&&h.addClass("selected");h.hasClass("restricted")?h.html('<span><b class="datepicker-date">'+e+"</b></span>"):h.html('<span><button type="button" class="datepicker-date">'+
e+"</button></span>");e++;-1===p&&e>d?(e=1,p=0):0===p&&e>m&&(p=e=1);w.append(h)}r.append(w)}},renderWheel:function(a){var b=a.getMonth(),c=this.$wheelsMonth.find("ul"),d=a.getFullYear();a=this.$wheelsYear.find("ul");this.sameYearOnly?(this.$wheelsMonth.addClass("full"),this.$wheelsYear.addClass("hide")):(this.$wheelsMonth.removeClass("full"),this.$wheelsYear.removeClass("hide"));c.find(".selected").removeClass("selected");b=c.find('li[data-month="'+b+'"]');b.addClass("selected");c.scrollTop(c.scrollTop()+
(b.position().top-c.outerHeight()/2-b.outerHeight(!0)/2));a.empty();for(c=d-10;c<d+11;c++)a.append('<li data-year="'+c+'"><button type="button">'+c+"</button></li>");c=a.find('li[data-year="'+d+'"]');c.addClass("selected");this.artificialScrolling=!0;a.scrollTop(a.scrollTop()+(c.position().top-a.outerHeight()/2-c.outerHeight(!0)/2));this.artificialScrolling=!1;b.find("button").focus()},selectClicked:function(){var a=this.$wheelsMonth.find(".selected").attr("data-month"),b=this.$wheelsYear.find(".selected").attr("data-year");
this.changeView("calendar",new Date(b,a,1))},setCulture:function(a){if(!a)return!1;if(this.moment)f.locale(a);else throw"moment.js is not available so you cannot use this function";},setDate:function(a){a=this.parseDate(a);this.isInvalidDate(a)?(this.selectedDate=null,this.renderMonth()):this.isRestricted(a.getDate(),a.getMonth(),a.getFullYear())?(this.selectedDate=!1,this.renderMonth()):(this.selectedDate=a,this.renderMonth(a),this.$input.val(this.formatDate(a)));this.inputValue=this.$input.val();
return this.selectedDate},setFormat:function(a){if(!a)return!1;if(this.moment)this.momentFormat=a;else throw"moment.js is not available so you cannot use this function";},setRestrictedDates:function(a){var b=[],c=this,d,e,f=function(a){if(-Infinity===a)return{date:-Infinity,month:-Infinity,year:-Infinity};if(Infinity===a)return{date:Infinity,month:Infinity,year:Infinity};a=c.parseDate(a);return{date:a.getDate(),month:a.getMonth(),year:a.getFullYear()}};this.restricted=a;d=0;for(e=a.length;d<e;d++)b.push({from:f(a[d].from),
to:f(a[d].to)});this.restrictedParsed=b},titleClicked:function(a){this.changeView("wheels",new Date(this.$headerTitle.attr("data-year"),this.$headerTitle.attr("data-month"),1))},todayClicked:function(a){a=new Date;a.getMonth()+""===this.$headerTitle.attr("data-month")&&a.getFullYear()+""===this.$headerTitle.attr("data-year")||this.renderMonth(a)},yearClicked:function(a){this.$wheelsYear.find(".selected").removeClass("selected");c(a.currentTarget).parent().addClass("selected")}};c.fn.datepicker=function(a){var b=
Array.prototype.slice.call(arguments,1),f,d=this.each(function(){var d=c(this),g=d.data("fu.datepicker"),k="object"===typeof a&&a;g||d.data("fu.datepicker",g=new q(this,k));"string"===typeof a&&(f=g[a].apply(g,b))});return void 0===f?d:f};c.fn.datepicker.defaults={allowPastDates:!1,date:new Date,formatDate:null,momentConfig:{culture:"en",format:"L"},parseDate:null,restricted:[],restrictedText:"Restricted",sameYearOnly:!1};c.fn.datepicker.Constructor=q;c.fn.datepicker.noConflict=function(){c.fn.datepicker=
y;return this};c(document).on("mousedown.fu.datepicker.data-api","[data-initialize=datepicker]",function(a){a=c(a.target).closest(".datepicker");a.data("datepicker")||a.datepicker(a.data())});c(document).on("click.fu.datepicker.data-api",".datepicker .dropdown-menu",function(a){var b=c(a.target);b.is(".datepicker-date")&&!b.closest(".restricted").length||a.stopPropagation()});c(document).on("click.fu.datepicker.data-api",".datepicker input",function(a){a.stopPropagation()});c(function(){c("[data-initialize=datepicker]").each(function(){var a=
c(this);a.data("datepicker")||a.datepicker(a.data())})})});