(function(b){"function"===typeof define&&define.amd?define(["jquery","fuelux/repeater"],b):b(jQuery)})(function(b){function l(a,c){for(var e=!1;!e&&0<=c.search("{{");){var d=void 0,f=void 0,g=void 0,f=c.indexOf("{{"),d=c.indexOf("}}",f+2);-1<f&&-1<d?(g=b.trim(c.substring(f+2,d)),g=void 0!==a[g]?a[g]:"",c=c.substring(0,f)+g+c.substring(d+2)):e=!0}return c}b.fn.repeater&&(b.fn.repeater.Constructor.prototype.thumbnail_clearSelectedItems=function(){this.$canvas.find(".repeater-thumbnail-cont .selectable.selected").removeClass("selected")},
b.fn.repeater.Constructor.prototype.thumbnail_getSelectedItems=function(){var a=[];this.$canvas.find(".repeater-thumbnail-cont .selectable.selected").each(function(){a.push(b(this))});return a},b.fn.repeater.Constructor.prototype.thumbnail_setSelectedItems=function(a,c){function e(){if(m===a[h].index)return k=b(this),!1;m++}function d(){k=b(this);k.is(a[h].selector)&&f(k,a[h].selected)}function f(a,b){(void 0!==b?b:1)?(c||"multi"===g||l.thumbnail_clearSelectedItems(),a.addClass("selected")):a.removeClass("selected")}
var g=this.viewOptions.thumbnail_selectable,l=this,h,k,n,m;b.isArray(a)||(a=[a]);n=!0===c||"multi"===g?a.length:g?0<a.length?1:0:0;for(h=0;h<n;h++)void 0!==a[h].index?(k=b(),m=0,this.$canvas.find(".repeater-thumbnail-cont .selectable").each(e),0<k.length&&f(k,a[h].selected)):a[h].selector&&this.$canvas.find(".repeater-thumbnail-cont .selectable").each(d)},b.fn.repeater.defaults=b.extend({},b.fn.repeater.defaults,{thumbnail_alignment:"left",thumbnail_infiniteScroll:!1,thumbnail_itemRendered:null,thumbnail_selectable:!1,
thumbnail_template:'<div class="thumbnail repeater-thumbnail"><img height="75" src="{{src}}" width="65"><span>{{name}}</span></div>'}),b.fn.repeater.viewTypes.thumbnail={selected:function(){var a=this.viewOptions.thumbnail_infiniteScroll;a&&(a="object"===typeof a?a:{},this.infiniteScrolling(!0,a))},before:function(a){var c=this.viewOptions.thumbnail_alignment,e=this.$canvas.find(".repeater-thumbnail-cont"),d=a.data;a={};var f;1>e.length&&(e=b('<div class="clearfix repeater-thumbnail-cont" data-container="true" data-infinite="true" data-preserve="shallow"></div>'),
c&&"none"!==c?(f={center:1,justify:1,left:1,right:1},c=f[c]?c:"justify",e.addClass("align-"+c),this.thumbnail_injectSpacers=!0,a.item=e):(this.thumbnail_injectSpacers=!1,a.action="none"));d.items&&1>d.items.length?(c=b('<div class="empty"></div>'),c.append(this.viewOptions.thumbnail_noItemsHTML),e.append(c)):e.find(".empty:first").remove();return a},renderItem:function(a){var c=this.viewOptions.thumbnail_selectable,e=this,d=b(l(a.subset[a.index],this.viewOptions.thumbnail_template));c&&(d.addClass("selectable"),
d.on("click",function(){d.hasClass("selected")?(d.removeClass("selected"),e.$element.trigger("deselected.fu.repeaterThumbnail",d)):("multi"!==c&&e.$canvas.find(".repeater-thumbnail-cont .selectable.selected").each(function(){var a=b(this);a.removeClass("selected");e.$element.trigger("deselected.fu.repeaterThumbnail",a)}),d.addClass("selected"),e.$element.trigger("selected.fu.repeaterThumbnail",d))}));a.container.append(d);this.thumbnail_injectSpacers&&d.after('<span class="spacer">&nbsp;</span>');
this.viewOptions.thumbnail_itemRendered&&this.viewOptions.thumbnail_itemRendered({container:a.container,item:d,itemData:a.subset[a.index]},function(){});return!1}})});