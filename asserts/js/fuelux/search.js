(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b(jQuery)})(function(b){var c=b.fn.search,d=function(a,f){this.$element=b(a);this.options=b.extend({},b.fn.search.defaults,f);this.$button=this.$element.find("button");this.$input=this.$element.find("input");this.$icon=this.$element.find(".glyphicon");this.$button.on("click.fu.search",b.proxy(this.buttonclicked,this));this.$input.on("keydown.fu.search",b.proxy(this.keypress,this));this.$input.on("keyup.fu.search",b.proxy(this.keypressed,
this));this.activeSearch=""};d.prototype={constructor:d,destroy:function(){this.$element.remove();this.$element.find("input").each(function(){b(this).attr("value",b(this).val())});return this.$element[0].outerHTML},search:function(a){this.$icon.hasClass("glyphicon")&&this.$icon.removeClass("glyphicon-search").addClass("glyphicon-remove");this.activeSearch=a;this.$element.addClass("searched");this.$element.trigger("searched.fu.search",a)},clear:function(){this.$icon.hasClass("glyphicon")&&this.$icon.removeClass("glyphicon-remove").addClass("glyphicon-search");
this.activeSearch="";this.$input.val("");this.$element.removeClass("searched");this.$element.trigger("cleared.fu.search")},action:function(){var a=this.$input.val(),b=""===a||a===this.activeSearch;this.activeSearch&&b?this.clear():a&&this.search(a)},buttonclicked:function(a){a.preventDefault();b(a.currentTarget).is(".disabled, :disabled")||this.action()},keypress:function(a){13===a.which&&a.preventDefault()},keypressed:function(a){13===a.which?(a.preventDefault(),this.action()):9===a.which?a.preventDefault():
(a=this.$input.val(),a===this.activeSearch&&a?this.$icon.removeClass("glyphicon-search").addClass("glyphicon-remove"):(this.$icon.removeClass("glyphicon-remove").addClass("glyphicon-search"),a?this.$element.removeClass("searched"):this.options.clearOnEmpty&&this.clear()))},disable:function(){this.$element.addClass("disabled");this.$input.attr("disabled","disabled");this.$button.addClass("disabled")},enable:function(){this.$element.removeClass("disabled");this.$input.removeAttr("disabled");this.$button.removeClass("disabled")}};
b.fn.search=function(a){var f=Array.prototype.slice.call(arguments,1),g,c=this.each(function(){var c=b(this),e=c.data("fu.search"),h="object"===typeof a&&a;e||c.data("fu.search",e=new d(this,h));"string"===typeof a&&(g=e[a].apply(e,f))});return void 0===g?c:g};b.fn.search.defaults={clearOnEmpty:!1};b.fn.search.Constructor=d;b.fn.search.noConflict=function(){b.fn.search=c;return this};b(document).on("mousedown.fu.search.data-api","[data-initialize=search]",function(a){a=b(a.target).closest(".search");
a.data("fu.search")||a.search(a.data())});b(function(){b("[data-initialize=search]").each(function(){var a=b(this);a.data("fu.search")||a.search(a.data())})})});